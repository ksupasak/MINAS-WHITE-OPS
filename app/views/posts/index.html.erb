<div class="page-header-cyber">
  <h1 class="page-title-cyber">Posts</h1>
  <div class="d-flex gap-2">
    <%= button_to "Reset All", destroy_all_posts_path, method: :delete, data: { confirm: "Delete all posts?" }, class: "btn-cyber btn-danger-cyber" %>
    <%= link_to "New Post", new_post_path, class: "btn-cyber btn-primary-cyber" %>
  </div>
</div>

<div class="glass-card">
  <div class="card-body-cyber p-0">
    <table class="table-cyber">
      <thead>
        <tr>
          <th>Post ID</th>
          <th>Subject</th>
          <th>Title/Text</th>
          <th>Channel</th>
          <th>Source</th>
          <th>Regional</th>
          <th>Created</th>
          <th>Sentiment Status</th>
          <th>Index Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @posts.each do |post| %>
          <tr>
            <td><%= link_to post.post_id&.truncate(15), post %></td>
            <td><%= post.subject  %></td>
            <td><%= (post.title || post.text)&.truncate(50) %></td>
            <td><span class="status-badge"><%= post.channel %></span></td>
            <td><%= post.source&.truncate(20) %></td>
            <td><%= post.regional&.truncate(20) %></td>
            <td><%= post.created_at&.strftime("%Y-%m-%d %H:%M") %></td>
            <td><%= post.sentiment_status&.capitalize || "—" %></td>
            <td><%= post.index_status&.capitalize || "—" %></td>
            <td class="text-end">
              <%= link_to "View", post, class: "btn-cyber btn-secondary-cyber btn-sm" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
