<div class="page-header-cyber">
  <h1 class="page-title-cyber">AI Models</h1>
  <div class="d-flex gap-2">
    <% if policy(Model).destroy_all? %>
      <%= button_to "Reset All", destroy_all_models_path, method: :delete, data: { confirm: "Delete all models?" }, class: "btn-cyber btn-danger-cyber" %>
    <% end %>
    <%= link_to "New Model", new_model_path, class: "btn-cyber btn-primary-cyber" %>
  </div>
</div>

<!-- Provider Stats -->
<div class="row mb-4">
  <% Model::PROVIDERS.each do |provider| %>
    <div class="col-md-2">
      <div class="provider-stat-card">
        <span class="provider-icon">
          <% case provider %>
          <% when "ollama" %>ðŸ¦™
          <% when "openai" %>ðŸ¤–
          <% when "anthropic" %>ðŸ§ 
          <% when "huggingface" %>ðŸ¤—
          <% else %>â—ˆ
          <% end %>
        </span>
        <div class="provider-info">
          <span class="provider-count"><%= Model.by_provider(provider).count %></span>
          <span class="provider-name"><%= provider.capitalize %></span>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="glass-card">
  <div class="card-body-cyber p-0">
    <table class="table-cyber">
      <thead>
        <tr>
          <th>Name</th>
          <th>Provider</th>
          <th>Model ID</th>
          <th>Version</th>
          <th>Capabilities</th>
          <th>Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @models.each do |model| %>
          <tr>
            <td>
              <%= link_to model.name, model, class: "model-link" %>
            </td>
            <td>
              <span class="provider-badge <%= model.provider %>">
                <span class="icon"><%= model.provider_icon %></span>
                <%= model.provider&.capitalize %>
              </span>
            </td>
            <td><code><%= model.model_id || "â€”" %></code></td>
            <td><%= model.version || "â€”" %></td>
            <td>
              <% model.capabilities.each do |cap| %>
                <span class="capability-tag"><%= cap %></span>
              <% end %>
            </td>
            <td>
              <span class="status-badge <%= model.active? ? 'active' : 'inactive' %>">
                <%= model.active? ? "Active" : "Inactive" %>
              </span>
            </td>
            <td class="text-end">
              <%= link_to "View", model, class: "btn-cyber btn-secondary-cyber btn-sm" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<style>
.provider-stat-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--cyber-border);
  border-radius: 10px;
  transition: all 0.3s ease;
}

.provider-stat-card:hover {
  border-color: var(--cyber-primary);
  box-shadow: 0 0 15px var(--cyber-primary-glow);
}

.provider-icon {
  font-size: 28px;
}

.provider-info {
  display: flex;
  flex-direction: column;
}

.provider-count {
  font-family: var(--font-display);
  font-size: 24px;
  font-weight: 700;
  color: var(--cyber-text-primary);
}

.provider-name {
  font-size: 11px;
  color: var(--cyber-text-muted);
  text-transform: uppercase;
}

.model-link {
  color: var(--cyber-primary);
  text-decoration: none;
  font-weight: 600;
}

.model-link:hover {
  text-shadow: 0 0 10px var(--cyber-primary-glow);
}

.provider-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
}

.provider-badge.ollama { background: rgba(255, 200, 100, 0.15); color: #ffc864; }
.provider-badge.openai { background: rgba(0, 200, 100, 0.15); color: #00c864; }
.provider-badge.anthropic { background: rgba(200, 150, 100, 0.15); color: #c89664; }
.provider-badge.huggingface { background: rgba(255, 200, 0, 0.15); color: #ffc800; }
.provider-badge.custom { background: rgba(0, 240, 255, 0.15); color: var(--cyber-primary); }

.capability-tag {
  display: inline-block;
  padding: 2px 8px;
  margin: 2px;
  background: rgba(0, 240, 255, 0.1);
  border: 1px solid var(--cyber-border);
  border-radius: 4px;
  font-size: 10px;
  color: var(--cyber-text-secondary);
}

code {
  padding: 2px 8px;
  background: rgba(0, 240, 255, 0.1);
  border: 1px solid var(--cyber-border);
  border-radius: 4px;
  color: var(--cyber-primary);
  font-family: monospace;
  font-size: 11px;
}
</style>
